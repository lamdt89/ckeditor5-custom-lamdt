/*
 *             Copyright (c) 2016 - 2022, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
import{Plugin as _0x4c620f}from'ckeditor5/src/core';import{ButtonView as _0x307dc6,View as _0x590c8d,Notification as _0x382ae8}from'ckeditor5/src/ui';import _0xab3dd2 from'./exportpdfcommand';import _0x484e09 from'../theme/icons/exportpdf.svg';import'../theme/exportpdf.css';export default class p extends _0x4c620f{static get['pluginName'](){return'ExportPdf';}static get['requires'](){return['CloudServices',_0x382ae8];}['init'](){const _0x26a360=this['editor'],t=_0x26a360['t'],_0xa3feba=_0x26a360['config']['get']('exportPdf')||{};_0x26a360['commands']['add']('exportPdf',new _0xab3dd2(_0x26a360)),_0x26a360['ui']['componentFactory']['add']('exportPdf',_0x54df9a=>{const _0x1279e4=_0x26a360['commands']['get']('exportPdf'),_0x413c93=new _0x307dc6(_0x54df9a);_0x413c93['set']({'label':t('Export\x20to\x20PDF'),'icon':_0x484e09,'tooltip':!0x0}),_0x413c93['bind']('isOn','isEnabled')['to'](_0x1279e4,'isBusy','isEnabled'),_0x413c93['extendTemplate']({'attributes':{'class':[_0x413c93['bindTemplate']['if']('isOn','ck-exportpdf_status-pending')]}});const _0x23e36d=new _0x590c8d();return _0x23e36d['setTemplate']({'tag':'span','attributes':{'class':['ck','ck-exportpdf__spinner-container']},'children':[{'tag':'span','attributes':{'class':['ck','ck-exportpdf__spinner']}}]}),_0x413c93['children']['add'](_0x23e36d),this['listenTo'](_0x413c93,'execute',()=>{_0x26a360['execute']('exportPdf',_0xa3feba),_0x26a360['editing']['view']['focus']();}),_0x413c93;});const _0x618088=_0x26a360['plugins']['get']('CloudServices');if(!0x1===_0xa3feba['tokenUrl'])this['_token']=null;else{if(_0xa3feba['tokenUrl'])return _0x618088['registerTokenUrl'](_0xa3feba['tokenUrl'])['then'](_0x3b89da=>{this['_token']=_0x3b89da;});this['_token']=_0x618088['token'];}}}